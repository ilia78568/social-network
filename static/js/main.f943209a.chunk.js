(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{128:function(e,t,n){e.exports={selectedPage:"Paginator_selectedPage__2QiqV"}},129:function(e,t,n){e.exports={userPhoto:"users_userPhoto__3QVHF",selectedPage:"users_selectedPage__1ltKj"}},130:function(e,t,n){e.exports={item:"Post_item__fwoZG"}},162:function(e,t,n){},163:function(e,t,n){},283:function(e,t,n){"use strict";n.r(t);var r=n(0),s=n(1),a=n.n(s),c=n(64),i=n.n(c),o=(n(162),n(24)),u=n(25),l=n(27),d=n(26),j=(n(163),n(32)),p=n.n(j),f=n(13),b=function(){return Object(r.jsxs)("nav",{className:p.a.nav,children:[Object(r.jsx)("div",{className:"".concat(p.a.item),children:Object(r.jsx)(f.b,{to:"/profile",activeClassName:p.a.activeLink,children:"Profile"})}),Object(r.jsx)("div",{className:p.a.item,children:Object(r.jsx)(f.b,{to:"/dialogs",activeClassName:p.a.activeLink,children:"Messages"})}),Object(r.jsx)("div",{className:p.a.item,children:Object(r.jsx)(f.b,{to:"/users",activeClassName:p.a.activeLink,children:"Users"})})]})},h=n(12),O=n(44),g=n(3),m="ADD-MESSAGE",x={dialogs:[{id:1,name:"\u0418\u043b\u044c\u044f"},{id:2,name:"\u0410\u043d\u0434\u0440\u0435\u0439"},{id:3,name:"\u0412\u043b\u0430\u0434"}],messages:[{id:1,message:"Hi all test test"},{id:2,message:"Do u like me?"},{id:3,message:"Bye bye"}]},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:var n=t.newMessageText;return Object(g.a)(Object(g.a)({},e),{},{messages:[].concat(Object(O.a)(e.messages),[{id:4,message:n}])});default:return e}},P=n(45),w=n.n(P),S=function(e){return Object(r.jsx)(f.b,{to:"/dialogs/"+e.id,className:w.a.dialog,children:e.name})},y=function(e){var t=e.message;return Object(r.jsx)("div",{className:"message",children:t})},C=n(122),k=n(123),_=n(69),I=n(53),A=n.n(I),U=function(e){e.input;var t=e.meta,n=(e.child,Object(_.a)(e,["input","meta","child"])),s=t.touched&&t.error;return Object(r.jsxs)("div",{className:A.a.formControl+" "+(s?A.a.error:""),children:[Object(r.jsx)("div",{children:n.children}),s&&Object(r.jsx)("span",{children:t.error})]})},N=function(e){var t=e.input,n=(e.meta,e.child,Object(_.a)(e,["input","meta","child"]));return Object(r.jsx)(U,Object(g.a)(Object(g.a)({},e),{},{children:Object(r.jsx)("textarea",Object(g.a)(Object(g.a)({},t),n))}))},E=function(e){var t=e.input,n=(e.meta,e.child,Object(_.a)(e,["input","meta","child"]));return Object(r.jsx)(U,Object(g.a)(Object(g.a)({},e),{},{children:Object(r.jsx)("input",Object(g.a)(Object(g.a)({},t),n))}))},T=function(e){if(!e)return"Field is required"},F=function(e){return function(t){if(t.length>e)return"Max length is ".concat(e," symbols")}},z=F(100),L=Object(k.a)({form:"dialogAddMessageForm"})((function(e){return Object(r.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(r.jsx)(C.a,{component:N,name:"newMessageText",placeholder:"Enter message",validate:[T,z]}),Object(r.jsx)("button",{children:"Add message"})]})})),D=function(e){var t=e.dialogsPage,n=t.dialogs.map((function(e){return Object(r.jsx)(S,{id:e.id,name:e.name},e.id)})),s=t.messages.map((function(e){return Object(r.jsx)(y,{message:e.message,id:e.id},e.id)}));return Object(r.jsxs)("div",{className:w.a.dialogs,children:[Object(r.jsx)("div",{className:w.a.dialogsItems,children:n}),Object(r.jsxs)("div",{className:w.a.messages,children:[s,Object(r.jsx)(L,{onSubmit:function(t){e.addMessage(t.newMessageText)}})]})]})},M=n(11),R=n(8),G=function(e){return{isAuth:e.auth.isAuth}},B=function(e){var t=function(t){Object(l.a)(s,t);var n=Object(d.a)(s);function s(){return Object(o.a)(this,s),n.apply(this,arguments)}return Object(u.a)(s,[{key:"render",value:function(){return this.props.isAuth?Object(r.jsx)(e,Object(g.a)({},this.props)):Object(r.jsx)(h.a,{to:"/login"})}}]),s}(a.a.Component);return Object(M.b)(G)(t)},H=Object(R.d)(Object(M.b)((function(e){return{dialogsPage:e.dialogsPage}}),(function(e){return{addMessage:function(t){e(function(e){return{type:m,newMessageText:e}}(t))}}})),B)(D),q=n(10),W=n.n(q),J=n(15),V=n(127).create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"3214a09a-b287-4d4d-9d6d-14a050c8456a"}}),Q=function(e,t){return V.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},K=function(e){return V.post("follow/".concat(e))},X=function(e){return V.delete("follow/".concat(e))},Z=function(e){return console.warn("Obsolet method, use profile object"),Y.getProfile(e)},Y={getProfile:function(e){return V.get("profile/"+e)},getStatus:function(e){return V.get("profile/status/"+e)},updateStatus:function(e){return V.put("profile/status",{status:e})},savePhoto:function(e){var t=new FormData;return t.append("image",e),V.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}})},saveProfile:function(e){return V.put("profile",e)}},$=function(){return V.get("auth/me")},ee=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return V.post("auth/login",{email:e,password:t,rememberMe:n,captcha:r})},te=function(){return V.delete("auth/login")},ne=function(){return V.get("security/get-captcha-url")},re="FOLLOW",se="UNFOLLOW",ae="SET-USERS",ce="SET-CURRENT-PAGE",ie="SET-TOTAL-USERS-COUNT",oe="TOGGLE-IS-FETCHING",ue="TOGGLE-IS-FOLLOWING-PROGRESS",le={users:[],pageSize:5,totalUsersCount:0,currentPage:2,isFetching:!0,followingInProgress:[],portionSize:10},de=function(e){return{type:re,userId:e}},je=function(e){return{type:se,userId:e}},pe=function(e){return{type:ce,currentPage:e}},fe=function(e){return{type:oe,isFetching:e}},be=function(e,t){return{type:ue,isFetching:e,userId:t}},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re:return Object(g.a)(Object(g.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(g.a)(Object(g.a)({},e),{},{followed:!0}):e}))});case se:return Object(g.a)(Object(g.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(g.a)(Object(g.a)({},e),{},{followed:!1}):e}))});case ae:return Object(g.a)(Object(g.a)({},e),{},{users:t.users});case ce:return Object(g.a)(Object(g.a)({},e),{},{currentPage:t.currentPage});case ie:return Object(g.a)(Object(g.a)({},e),{},{totalUsersCount:t.count});case oe:return Object(g.a)(Object(g.a)({},e),{},{isFetching:t.isFetching});case ue:return Object(g.a)(Object(g.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(O.a)(e.followingInProgress),[t.userId]):[e.followingInProgress.filter((function(e){return e!=t.userId}))]});default:return e}},Oe=n(37),ge=n(128),me=n.n(ge),xe=function(e){for(var t=Math.ceil(e.totalItemsCount/e.pageSize),n=[],a=1;a<=t;a++)n.push(a);var c=Math.ceil(t/e.portionSize),i=Object(s.useState)(1),o=Object(Oe.a)(i,2),u=o[0],l=o[1],d=(u-1)*e.portionSize+1,j=u*e.portionSize;return Object(r.jsxs)("div",{children:[u>1&&Object(r.jsx)("button",{onClick:function(){return l(u-1)},children:"Left"}),n.filter((function(e){return e>=d&&e<=j})).map((function(t){return Object(r.jsx)("span",{onClick:function(){e.onPageChanged(t)},className:e.currentPage===t&&me.a.selectedPage,children:t})})),c>u&&Object(r.jsx)("button",{onClick:function(){return l(u+1)},children:"Next"})]})},ve=n(129),Pe=n.n(ve),we=n.p+"static/media/user.ffd534f6.jpg",Se=function(e){var t=e.user;return Object(r.jsx)("div",{children:Object(r.jsxs)("div",{children:[Object(r.jsxs)("span",{children:[Object(r.jsx)("div",{children:Object(r.jsx)(f.b,{to:"/profile/"+t.id,children:Object(r.jsx)("img",{src:null!=t.photos.small?t.photos.small:we,className:Pe.a.userPhoto})})}),Object(r.jsx)("div",{children:t.followed?Object(r.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.unfollow(t.id)},children:"Unfollow"}):Object(r.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.follow(t.id)},children:"Follow"})})]}),Object(r.jsxs)("span",{children:[Object(r.jsxs)("span",{children:[Object(r.jsx)("div",{children:t.name}),Object(r.jsx)("div",{children:t.status})]}),Object(r.jsxs)("span",{children:[Object(r.jsx)("div",{children:"elem.location.city"}),Object(r.jsx)("div",{children:"elem.location.country"})]})]})]},t.id)})},ye=function(e){return Object(r.jsxs)("div",{children:[Object(r.jsx)(xe,{currentPage:e.currentPage,onPageChanged:e.onPageChanged,totalItemsCount:e.totalUsersCount,pageSize:e.pageSize,portionSize:e.portionSize}),e.users.map((function(t){return Object(r.jsx)(Se,{user:t,followingInProgress:e.followingInProgress,unfollow:e.unfollow,follow:e.follow},t.id)}))]})},Ce=n.p+"static/media/Spinner-1s-200px.955a6519.svg",ke=function(e){return Object(r.jsx)("img",{src:Ce})},_e=function(e){return e.usersPage.users},Ie=function(e){return e.usersPage.pageSize},Ae=function(e){return e.usersPage.totalUsersCount},Ue=function(e){return e.usersPage.currentPage},Ne=function(e){return e.usersPage.isFetching},Ee=function(e){return e.usersPage.followingInProgress},Te=function(e){return e.usersPage.portionSize},Fe=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).onPageChanged=function(t){var n=e.props.pageSize;e.props.requestUsers(t,n)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.currentPage,n=e.pageSize;this.props.requestUsers(t,n)}},{key:"render",value:function(){return Object(r.jsxs)(r.Fragment,{children:[this.props.isFetching?Object(r.jsx)(ke,{}):null,Object(r.jsx)(ye,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,users:this.props.users,follow:this.props.follow,unfollow:this.props.unfollow,followingInProgress:this.props.followingInProgress,portionSize:this.props.portionSize})," "]})}}]),n}(a.a.Component),ze=Object(R.d)(Object(M.b)((function(e){return{users:_e(e),pageSize:Ie(e),totalUsersCount:Ae(e),currentPage:Ue(e),isFetching:Ne(e),followingInProgress:Ee(e),portionSize:Te(e)}}),{follow:function(e){return function(){var t=Object(J.a)(W.a.mark((function t(n){return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(be(!0,e)),t.next=3,K(e);case 3:0===t.sent.data.resultCode&&n(de(e)),n(be(!1,e));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},unfollow:function(e){return function(){var t=Object(J.a)(W.a.mark((function t(n){return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(be(!0,e)),t.next=3,X(e);case 3:0===t.sent.data.resultCode&&n(je(e)),n(be(!1,e));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setCurrentPage:pe,toggleFollowingProgress:be,requestUsers:function(e,t){return function(){var n=Object(J.a)(W.a.mark((function n(r){var s;return W.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(fe(!0)),r(pe(e)),n.next=4,Q(e,t);case 4:s=n.sent,r(fe(!1)),r((c=s.items,{type:ae,users:c})),r((a=s.totalCount,{type:ie,count:a}));case 8:case"end":return n.stop()}var a,c}),n)})));return function(e){return n.apply(this,arguments)}}()}}))(Fe),Le="ADD-POST",De="SET-USER-PROFILE",Me="SET-STATUS",Re="DELETE-POST",Ge="SAVE-PHOTO-SUCCES",Be={posts:[{message:"lallalaal",likeCount:13,id:0},{message:"it is my first post",likeCount:0,id:1},{message:"do u like anime",likeCount:103,id:2}],profile:null,status:""},He=function(e){return{type:Me,status:e}},qe=function(e){return{type:De,profile:e}},We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Le:var n={id:5,message:t.newPostText,likeCount:0};return Object(g.a)(Object(g.a)({},e),{},{posts:[].concat(Object(O.a)(e.posts),[n])});case De:return Object(g.a)(Object(g.a)({},e),{},{profile:t.profile});case Me:return Object(g.a)(Object(g.a)({},e),{},{status:t.status});case Re:return Object(g.a)(Object(g.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!=t.postId}))});case Ge:return Object(g.a)(Object(g.a)({},e),{},{profile:Object(g.a)(Object(g.a)({},e.profile),{},{photos:t.photo})});default:return e}},Je=n(130),Ve=n.n(Je),Qe=function(e){var t=e.message,n=e.likeCount;return Object(r.jsxs)("div",{className:Ve.a.item,children:[Object(r.jsx)("img",{alt:"alt",src:"https://i.pinimg.com/originals/4d/af/2f/4daf2f183af331a8ba9a12bc2a458486.jpg"}),t,Object(r.jsx)("div",{children:Object(r.jsxs)("span",{children:["Like ",n]})})]})},Ke=F(30),Xe=Object(k.a)({form:"profileAddPosts"})((function(e){return Object(r.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(r.jsx)(C.a,{component:N,name:"newPostText",placeholder:"Add text",validate:[T,Ke]}),Object(r.jsx)("button",{children:"Add post"})]})})),Ze=function(e){var t=e.posts.map((function(e){return Object(r.jsx)(Qe,{message:e.message,likeCount:e.likeCount},e.message)}));return Object(r.jsxs)("div",{className:"posts",children:["My post",Object(r.jsx)("div",{children:Object(r.jsx)(Xe,{onSubmit:function(t){e.addPost(t.newPostText)}})}),t]})},Ye=Object(M.b)((function(e){return{posts:e.profilePage.posts}}),(function(e){return{addPost:function(t){e(function(e){return{type:Le,newPostText:e}}(t))}}}))(Ze),$e=n(43),et=n.n($e),tt=function(e){var t=Object(s.useState)(!1),n=Object(Oe.a)(t,2),a=n[0],c=n[1],i=Object(s.useState)(e.status),o=Object(Oe.a)(i,2),u=o[0],l=o[1];Object(s.useEffect)((function(){l(e.status)}),[e.status]);return Object(r.jsxs)("div",{children:[!a&&Object(r.jsx)("div",{children:Object(r.jsx)("span",{onDoubleClick:function(){c(!0)},children:e.status||"no status"})}),a&&Object(r.jsx)("div",{children:Object(r.jsx)("input",{onChange:function(e){l(e.currentTarget.value)},autoFocus:!0,onBlur:function(){c(!1),e.updateStatus(u)},value:u})})]})},nt=(Object(k.a)({form:"edit-profile"})((function(e){return Object(r.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(r.jsx)("button",{children:"save"}),Object(r.jsx)("div",{children:"Fullname"}),Object(r.jsx)(C.a,{validate:[],placeholder:"ful name",name:"fullName",component:E}),Object(r.jsxs)("div",{children:[Object(r.jsx)("b",{children:"looking for a job"})," ",Object(r.jsx)(C.a,{name:"lookingForAJob",component:E,type:"checkbox"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("b",{children:"My professional skills"})," ",Object(r.jsx)(C.a,{name:"lookingForAJobDescription",component:N,placeholder:"My professional skills"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("b",{children:"About me"})," ",Object(r.jsx)(C.a,{name:"aboutMe",component:N,placeholder:"About me"})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("b",{children:"contacts "})," ",Object.keys(e.profile.contacts).map((function(e){return Object(r.jsxs)("div",{className:et.a.contact,children:[Object(r.jsxs)("b",{children:[e," :"]})," ",Object(r.jsx)(C.a,{validate:[],placeholder:e,name:"contacts."+e,component:E})]},e)}))]})]})})),function(e){var t=Object(s.useState)(!1),n=Object(Oe.a)(t,2),a=(n[0],n[1]);if(!e.profile)return Object(r.jsx)(ke,{});return Object(r.jsx)("div",{children:Object(r.jsxs)("div",{className:et.a.descriptionBlock,children:[Object(r.jsx)("img",{src:e.profile.photos.small||we,className:et.a.img}),e.isOwner&&Object(r.jsx)("input",{type:"file",onChange:function(t){t.target.files.length&&(e.savePhoto(t.target.files[0]),a(!1))}}),Object(r.jsx)(tt,{status:e.status,updateStatus:e.updateStatus})]})})}),rt=function(e){return Object(r.jsxs)("div",{children:[Object(r.jsx)(nt,{profile:e.profile,status:e.status,updateStatus:e.updateStatus,isOwner:e.isOwner,savePhoto:e.savePhoto,saveProfile:e.saveProfile}),Object(r.jsx)(Ye,{})]})},st=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.autorizedUserId)||this.props.history.push("/login"),this.props.getUserProfile(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e){this.props.match.params.userId!=e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return Object(r.jsx)("div",{children:Object(r.jsx)(rt,Object(g.a)(Object(g.a)({},this.props),{},{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile}))})}}]),n}(a.a.Component),at=Object(R.d)(Object(M.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,autorizedUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{getUserProfile:function(e){return function(){var t=Object(J.a)(W.a.mark((function t(n){var r;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Z(e);case 2:r=t.sent,n(qe(r.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getStatus:function(e){return function(){var t=Object(J.a)(W.a.mark((function t(n){var r;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y.getStatus(e);case 2:r=t.sent,n(He(r.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateStatus:function(e){return function(){var t=Object(J.a)(W.a.mark((function t(n){return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y.updateStatus(e);case 2:0===t.sent.data.resultCode&&n(He(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},savePhoto:function(e){return function(){var t=Object(J.a)(W.a.mark((function t(n){var r;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y.savePhoto(e);case 2:0===(r=t.sent).data.resultCode&&n((s=r.data.data.photos,{type:Ge,photo:s}));case 4:case"end":return t.stop()}var s}),t)})));return function(e){return t.apply(this,arguments)}}()},saveProfile:function(e){return function(){var t=Object(J.a)(W.a.mark((function t(n,r){var s;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=r().auth.userId,t.next=3,Y.saveProfile(e);case 3:0===t.sent.data.resultCode&&n(qe(s));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),h.f,B)(st),ct=n(92),it=n.n(ct),ot=function(e){return Object(r.jsxs)("header",{className:it.a.header,children:[Object(r.jsx)("img",{src:"https://i.pinimg.com/originals/33/b8/69/33b869f90619e81763dbf1fccc896d8d.jpg"}),Object(r.jsx)("div",{className:it.a.loginBlock,children:e.isAuth?Object(r.jsxs)("div",{children:[e.login,"  ",Object(r.jsx)("button",{onClick:e.logout,children:"Logout"})]}):Object(r.jsx)(f.b,{to:"/login",children:"Login"})})]})},ut=n(35),lt="samurai-network/auth/SET-USER-DATA",dt="samurai-network/auth/GET-CAPTCHA-URL",jt={userId:null,email:null,login:null,isAuth:!1,captchaUrl:null},pt=function(e,t,n,r){return{type:lt,payload:{userId:e,email:t,login:n,isAuth:r}}},ft=function(e){return{type:dt,payload:e}},bt=function(){return function(){var e=Object(J.a)(W.a.mark((function e(t){var n,r,s,a,c;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$();case 2:0===(n=e.sent).data.resultCode&&(r=n.data.data,s=r.id,a=r.login,c=r.email,t(pt(s,c,a,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ht=function(){return function(){var e=Object(J.a)(W.a.mark((function e(t){var n,r;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne();case 2:n=e.sent,r=n.data.url,t(ft(r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case lt:case dt:return Object(g.a)(Object(g.a)({},e),t.payload);default:return e}},gt=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(r.jsx)(ot,Object(g.a)({},this.props))}}]),n}(a.a.Component),mt=Object(M.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logout:function(){return function(){var e=Object(J.a)(W.a.mark((function e(t){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te();case 2:0===e.sent.data.resultCode&&t(pt(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(gt),xt=Object(k.a)({form:"login"})((function(e){return Object(r.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(r.jsx)("div",{children:Object(r.jsx)(C.a,{validate:[T],placeholder:"email",name:"email",component:E})}),Object(r.jsx)("div",{children:Object(r.jsx)(C.a,{validate:[T],placeholder:"Password",name:"password",component:E,type:"password"})}),Object(r.jsxs)("div",{children:[Object(r.jsx)(C.a,{validate:[],component:E,name:"rememberMe",type:"checkbox"})," remember me"]}),e.captchaUrl&&Object(r.jsx)("img",{src:e.captchaUrl}),e.captchaUrl&&Object(r.jsx)(C.a,{validate:[T],placeholder:"symbols",name:"captcha",component:E}),e.error&&Object(r.jsx)("div",{className:A.a.formSummaryError,children:e.error}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{children:"Login"})})]})})),vt=Object(M.b)((function(e){return{isAuth:e.auth.isAuth,captchaUrl:e.auth.captchaUrl}}),{login:function(e,t,n,r){return function(){var s=Object(J.a)(W.a.mark((function s(a){var c,i;return W.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,ee(e,t,n,r);case 2:0===(c=s.sent).data.resultCode?a(bt()):(10===c.data.resultCode&&a(ht()),i=c.data.messages.length>0?c.data.messages[0]:"Some error",a(Object(ut.a)("login",{_error:i})));case 4:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()}})((function(e){return e.isAuth?Object(r.jsx)(h.a,{to:"/profile"}):Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Login"}),Object(r.jsx)(xt,{captchaUrl:e.captchaUrl,onSubmit:function(t){e.login(t.email,t.password,t.rememberMe,t.captcha)}})]})})),Pt="INITIALIZED-SUCCES",wt={initialized:!1},St=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Pt:return Object(g.a)(Object(g.a)({},e),{},{initialized:!0});default:return e}},yt=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?Object(r.jsx)(f.a,{children:Object(r.jsxs)("div",{className:"app-wrapper",children:[Object(r.jsx)(mt,{}),Object(r.jsx)(b,{}),Object(r.jsxs)("div",{className:"app-wrapper-content",children:[Object(r.jsx)(h.b,{path:"/profile/:userId?",render:function(){return Object(r.jsx)(at,{})}}),Object(r.jsx)(h.b,{path:"/dialogs",render:function(){return Object(r.jsx)(H,{})}}),Object(r.jsx)(h.b,{path:"/users",render:function(){return Object(r.jsx)(ze,{})}}),Object(r.jsx)(h.b,{path:"/login",render:function(){return Object(r.jsx)(vt,{})}})]})]})}):Object(r.jsx)(ke,{})}}]),n}(a.a.Component),Ct=Object(R.d)(h.f,Object(M.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){var t=e(bt());Promise.all([t]).then((function(){e({type:Pt})}))}}}))(yt),kt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,284)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),s(e),a(e),c(e)}))},_t=n(131),It=n(124),At=Object(R.c)({profilePage:We,dialogsPage:v,usersPage:he,auth:Ot,form:It.a,app:St}),Ut=Object(R.e)(At,Object(R.a)(_t.a));window.store=Ut;var Nt=Ut;i.a.render(Object(r.jsx)(f.a,{children:Object(r.jsx)(M.a,{store:Nt,children:Object(r.jsx)(Ct,{})})}),document.getElementById("root")),kt()},32:function(e,t,n){e.exports={nav:"Navbar_nav__z83CQ",item:"Navbar_item__3r0_X",activeLink:"Navbar_activeLink__1-gDR"}},43:function(e,t,n){e.exports={descriptionBlock:"ProfileInfo_descriptionBlock__v6wWO",img:"ProfileInfo_img__HML0V",contact:"ProfileInfo_contact__3JiSH"}},45:function(e,t,n){e.exports={dialogs:"Dialogs_dialogs__205EG",dialog:"Dialogs_dialog__20iLC",dialogsItems:"Dialogs_dialogsItems__21a3X",messages:"Dialogs_messages__3KQDe",message:"Dialogs_message__i8CV9"}},53:function(e,t,n){e.exports={formControl:"FormControl_formControl__3WRSk",error:"FormControl_error__1RoOs",formSummaryError:"FormControl_formSummaryError__7SBxp"}},92:function(e,t,n){e.exports={header:"Header_header__1HaWi",loginBlock:"Header_loginBlock__fuadq"}}},[[283,1,2]]]);
//# sourceMappingURL=main.f943209a.chunk.js.map